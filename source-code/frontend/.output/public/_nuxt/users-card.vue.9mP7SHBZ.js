import{_ as E}from"./user-default.WtagJgm3.js";import{H as T,_ as M,ab as R,L as p,a4 as u,a7 as F,o as r,c,a as i,U as e,a1 as v,w as a,b as s,O as I,d as V,t as h,a2 as m,a8 as B,ac as g}from"./entry.5Lv6T7CL.js";import{T as x,S as O}from"./usersRepository.f1b3Jz4D.js";import{N as H}from"./Tag.1U-v4BzY.js";import{M as L}from"./mail.g2zaDDJ8.js";import{H as $}from"./heart.0qS2sk0u.js";import{u as j}from"./use-message.R5VRgs6u.js";import{N as l}from"./createLucideIcon.T6YUi1ou.js";import{N as A}from"./Image.zWM4raD4.js";const G={class:"rounded overflow-hidden relative bg-white dark:bg-muted border shadow-accent"},P={class:"absolute top-2 left-2 z-20"},W={class:"h-[250px] relative overflow-hidden rounded-md"},D={key:1,src:E,class:"w-full h-full object-cover"},U={class:"space-y-1 mt-3"},q={class:"text-xl font-medium leading-none"},J={class:"grid grid-cols-5 mt-2 self-center pb-2 pt-2"},K={key:0,class:"text-gray-300 hover:text-red-600"},Q={key:1,class:"text-gray-300 hover:text-red-600"},X={key:2,class:"text-gray-300 hover:text-red-600"},ce=T({__name:"users-card",props:{card:{}},emits:["update"],setup(y,{emit:k}){const _=j(),w=M(),N=k,b=y,{card:t}=R(b),S=p(()=>{const{info:{messages_status:o}}=t.value;if(o){for(const n in o)if(o[n]!==!1&&o[n]!==null)return!0}return!1}),z=async()=>{try{if(t.value.is_favorite){const o=await g.removeFromFavourite(t.value.id);_.warning(o)}else{const o=await g.addToFavourite(t.value.id);_.success(o)}await w.setSettings(),await N("update")}catch{_.error("Ooops!Что-то пошло не так!")}},C=p(()=>u.MESSENGER+`/${t.value.id}`);return(o,n)=>{var f;const d=F("router-link");return r(),c("div",G,[i("div",P,[(f=e(t))!=null&&f.rating?(r(),v(e(H),{key:0,round:"",strong:"",bordered:!1},{icon:a(()=>[s(e(l),{component:I(e(x))},null,8,["component"])]),default:a(()=>[V(" "+h(e(t).rating),1)]),_:1})):m("",!0)]),i("div",W,[e(t).avatar?(r(),v(e(A),{key:0,src:e(t).avatar,"fallback-src":"~/assets/images/profile/user-default.png",width:"100%",height:"100%","object-fit":"cover",class:"w-full h-full"},null,8,["src"])):(r(),c("img",D))]),i("div",U,[s(d,{to:e(u).PROFILE+`${e(t).id}`,class:"text-black no-underline"},{default:a(()=>[i("h3",q,h(e(t).name),1)]),_:1},8,["to"])]),i("div",J,[S.value?(r(),c("div",K,[s(d,{to:C.value,class:"text-gray-300 hover:text-red-600"},{default:a(()=>[s(e(l),{size:32},{default:a(()=>[s(e(L),{size:32})]),_:1})]),_:1},8,["to"])])):m("",!0),e(t).active_contest?(r(),c("div",Q,[s(d,{to:e(u).ACTIVE_CONTEST,class:"text-gray-300 hover:text-red-600"},{default:a(()=>[s(e(l),{size:32},{default:a(()=>[s(e(O),{fill:"currentColor"})]),_:1})]),_:1},8,["to"])])):m("",!0),i("div",{class:B(["text-gray-300 hover:text-red-600",{"text-red-600":e(t).is_favorite}]),onClick:n[0]||(n[0]=Y=>z())},[s(e(l),{size:32},{default:a(()=>[s(e($),{size:32})]),_:1})],2),e(t).is_winner?(r(),c("div",X,[s(d,{to:e(u).WINNER_PAGE,class:"text-red-600"},{default:a(()=>[s(e(l),{size:32},{default:a(()=>[s(e(x),{size:32})]),_:1})]),_:1},8,["to"])])):m("",!0)])])}}});export{ce as _};
