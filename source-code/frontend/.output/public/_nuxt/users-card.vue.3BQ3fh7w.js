import{_ as T}from"./nuxt-link.IzQK7SDn.js";import{_ as C}from"./user-default.OPSOmCz7.js";import{H as M,_ as R,aa as F,L as p,a4 as u,o as r,c,a as i,U as e,a1 as v,w as o,b as s,O as I,d as V,t as h,a2 as _,a7 as B,ab as g}from"./entry.zKFpH4uL.js";import{T as x,S as O}from"./usersRepository.1_t_fRw5.js";import{N as H}from"./Tag.vlN__vQT.js";import{M as L}from"./mail.8-Lp7uhX.js";import{H as $}from"./heart.-GwHGe_2.js";import{u as j}from"./use-message.ll5pOFYi.js";import{N as l}from"./createLucideIcon.tXL73KB8.js";import{N as A}from"./Image.Q1XrGRN8.js";const G={class:"rounded overflow-hidden relative bg-white dark:bg-muted border shadow-accent"},P={class:"absolute top-2 left-2 z-20"},W={class:"h-[250px] relative overflow-hidden rounded-md"},D={key:1,src:C,class:"w-full h-full object-cover"},U={class:"space-y-1 mt-3"},q={class:"text-xl font-medium leading-none"},J={class:"grid grid-cols-5 mt-2 self-center pb-2 pt-2"},K={key:0,class:"text-gray-300 hover:text-red-600"},Q={key:1,class:"text-gray-300 hover:text-red-600"},X={key:2,class:"text-gray-300 hover:text-red-600"},le=M({__name:"users-card",props:{card:{}},emits:["update"],setup(y,{emit:k}){const m=j(),w=R(),N=k,b=y,{card:t}=F(b),S=p(()=>{const{info:{messages_status:a}}=t.value;if(a){for(const n in a)if(a[n]!==!1&&a[n]!==null)return!0}return!1}),z=async()=>{try{if(t.value.is_favorite){const a=await g.removeFromFavourite(t.value.id);m.warning(a)}else{const a=await g.addToFavourite(t.value.id);m.success(a)}await w.setSettings(),await N("update")}catch{m.error("Ooops!Что-то пошло не так!")}},E=p(()=>u.MESSENGER+`/${t.value.id}`);return(a,n)=>{var f;const d=T;return r(),c("div",G,[i("div",P,[(f=e(t))!=null&&f.rating?(r(),v(e(H),{key:0,round:"",strong:"",bordered:!1},{icon:o(()=>[s(e(l),{component:I(e(x))},null,8,["component"])]),default:o(()=>[V(" "+h(e(t).rating),1)]),_:1})):_("",!0)]),i("div",W,[e(t).avatar?(r(),v(e(A),{key:0,src:e(t).avatar,"fallback-src":"~/assets/images/profile/user-default.png",width:"100%",height:"100%","object-fit":"cover",class:"w-full h-full"},null,8,["src"])):(r(),c("img",D))]),i("div",U,[s(d,{to:e(u).PROFILE+`${e(t).id}`,class:"text-black no-underline"},{default:o(()=>[i("h3",q,h(e(t).name),1)]),_:1},8,["to"])]),i("div",J,[S.value?(r(),c("div",K,[s(d,{to:E.value,class:"text-gray-300 hover:text-red-600"},{default:o(()=>[s(e(l),{size:32},{default:o(()=>[s(e(L),{size:32})]),_:1})]),_:1},8,["to"])])):_("",!0),e(t).active_contest?(r(),c("div",Q,[s(d,{to:e(u).ACTIVE_CONTEST,class:"text-gray-300 hover:text-red-600"},{default:o(()=>[s(e(l),{size:32},{default:o(()=>[s(e(O),{fill:"currentColor"})]),_:1})]),_:1},8,["to"])])):_("",!0),i("div",{class:B(["text-gray-300 hover:text-red-600",{"text-red-600":e(t).is_favorite}]),onClick:n[0]||(n[0]=Y=>z())},[s(e(l),{size:32},{default:o(()=>[s(e($),{size:32})]),_:1})],2),e(t).is_winner?(r(),c("div",X,[s(d,{to:e(u).WINNER_PAGE,class:"text-red-600"},{default:o(()=>[s(e(l),{size:32},{default:o(()=>[s(e(x),{size:32})]),_:1})]),_:1},8,["to"])])):_("",!0)])])}}});export{le as _};
