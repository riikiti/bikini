import{H as N,o as p,c as v,F as I,V,a as o,a7 as F,t as w,a2 as S,r as k,L as M,a1 as z,w as t,b as s,U as e,Y as h,d as r,a8 as G,Z as O,a9 as R,a6 as T,aa as H,a4 as B,ab as q,O as W,ac as P,_ as Y}from"./entry.pFc-1y9s.js";import{_ as Z,N as A,a as j}from"./FileUpload.vue.WIm6e-10.js";import{u as J}from"./use-message.woW9dzlU.js";import{N as x}from"./Space.I2kgXzr4.js";import{c as U}from"./contestRepository.g19-DBt0.js";import{N as E}from"./GradientText.7COjgBvo.js";import{E as K}from"./EUserAccoutType.8nCACn_d.js";import{N as Q}from"./Alert.KdVOSXH8.js";import{N as X,a as L}from"./Image.VOO4w2XP.js";import{T as ee}from"./thumbs-up.DhRJpTca.js";import{c as te,N as D}from"./createLucideIcon.zuGyMurL.js";import{N as se}from"./Empty.M5QTMxNx.js";import{C as oe}from"./chevron-down.u1pK5kdP.js";import"./get-slot.bpfTnPl7.js";import"./Popover.nieaDODj.js";import"./format-length.4l65r8M5.js";import"./utils.VPR5iGU0.js";/**
 * @license lucide-vue-next v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=te("CameraIcon",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),ae={id:"prizes",class:"pb-12"},le=o("div",{class:"text-xl md:text-[48px] mb-16"},"Наши призы",-1),re={key:0,class:"gap-8 columns-1 md:columns-3 h-full my-8"},ie={class:"relative"},ce=["src"],de={class:"text-2xl text-center mt-3"},ue=N({__name:"ContestPrizeSection",props:{prizeList:{}},setup($){return(i,_)=>(p(),v("div",ae,[le,i.prizeList.length?(p(),v("div",re,[(p(!0),v(I,null,V(i.prizeList,(n,c)=>(p(),v("div",{key:c,class:"flex flex-col items-center"},[o("div",ie,[o("div",{class:F(["w-[200px] h-[200px] rounded-full shadow-lg flex overflow-hidden relative",{"-mt-12":n.place===1}])},[o("img",{src:n.image,alt:""},null,8,ce)],2),o("div",{class:F(["absolute w-[48px] h-[48px] rounded-full  bottom-2 left-1/2 transform -translate-x-1/2 translate-y-1/2 flex items-center justify-center font-bold text-2xl",{"bg-yellow-300":n.place===1},{"bg-cyan-400":n.place===2},{"bg-violet-400":n.place===3}])},w(n.place),3)]),o("div",de,w(n.name),1),o("div",null,w(n.description),1)]))),128))])):S("",!0)]))}}),pe=o("div",null,"Конкурс",-1),me=N({__name:"ContestUserModal",props:{isEdit:{type:Boolean}},emits:["formsave"],setup($,{emit:i}){const _=$,n=i,c=J(),g=()=>{c.success("Submit"),n("formsave",a.value)},f=()=>{n("formclose")},a=k(null),d=b=>{a.value=b,console.log("file-upload: ",a.value)},l=k({add:{route:"/api/auth/active-contest/add-photo",method:"POST"},update:{route:"/api/auth/active-contest/add-photo",method:"POST"}}),u=M(()=>l.value[_.isEdit?"update":"add"]);return console.log(u),(b,m)=>{const y=Z;return p(),z(e(G),{preset:"dialog"},{header:t(()=>[pe]),action:t(()=>[s(e(x),{size:"large"},{default:t(()=>[s(e(h),{type:"error",onClick:m[0]||(m[0]=C=>f())},{default:t(()=>[r("Отмена")]),_:1}),s(e(h),{type:"primary",onClick:m[1]||(m[1]=C=>g())},{default:t(()=>[r("Сохранить")]),_:1})]),_:1})]),default:t(()=>[o("div",null,[s(y,{route:e(u).route,method:e(u).method,onUploaded:d},null,8,["route","method"])])]),_:1})}}}),_e={class:"w-full"},fe={key:1,class:"bg-gray-100/50 w-full py-8"},ve={class:"text-2xl"},ge=["src"],he=N({__name:"ContestUser",setup($){const i=k(!1),_=O();R(_);const n=()=>{i.value=!0,l()},c=k(null),g=async()=>{console.log("saver");const{data:b}=await U.currentUserList();c.value=b.contest_model,console.log(c.value)},f=M(()=>c.value),a=async()=>{await g(),await _.profile(),u()},d=k(!1),l=()=>{d.value=!d.value},u=()=>{d.value=!1,i.value=!1};return T(async()=>{await g()}),(b,m)=>{const y=H("router-link");return p(),v(I,null,[o("div",_e,[e(f)?(p(),v("div",fe,[s(e(x),{vertical:"",size:"large",align:"center"},{default:t(()=>[o("div",ve,[r(" Я участница конкурса,мой рейтинг "),s(e(E),{gradient:"linear-gradient(to right, #8a2387, #e94057, #f27121)"},{default:t(()=>[r(w(e(f).rating),1)]),_:1})]),o("div",null,[o("img",{src:e(f).photo,alt:"",class:"w-[150px] h-[150px]"},null,8,ge)]),s(e(x),{class:"mt-6"},{default:t(()=>[s(y,{to:e(B).PROFILE+`${e(f).user.id}`},{default:t(()=>[s(e(h),{class:"uppercase",type:"primary",size:"large",dashed:""},{default:t(()=>[r("Мой Профиль")]),_:1})]),_:1},8,["to"]),s(e(h),{class:"uppercase",type:"primary",size:"large",dashed:"",onClick:n},{default:t(()=>[r("Обновить фото")]),_:1}),s(y,{to:e(B).STATISTICS+`/${e(f).user.id}`},{default:t(()=>[s(e(h),{class:"uppercase",type:"primary",size:"large",dashed:""},{default:t(()=>[r("Статистика")]),_:1})]),_:1},8,["to"])]),_:1})]),_:1})])):(p(),z(e(x),{key:0,justify:"center"},{default:t(()=>[s(e(h),{type:"info",size:"large",class:"md:text-3xl md:py-8",onClick:m[0]||(m[0]=C=>l())},{default:t(()=>[r("Стать участником конкурса")]),_:1})]),_:1}))]),s(e(me),{show:d.value,"onUpdate:show":m[1]||(m[1]=C=>d.value=C),"is-edit":i.value,onFormsave:a,onFormclose:m[2]||(m[2]=C=>u()),onClose:m[3]||(m[3]=C=>u())},null,8,["show","is-edit"])],64)}}}),ye={class:"flex flex-col p-4 rounded-lg overflow-hidden shadow"},xe={class:"mb-2 flex justify-between items-center"},we={key:0},$e={class:"h-[250px] overflow-hidden rounded w-full max-h-full"},Ce=o("div",{class:"text-center"},[o("span",null,[o("b",{class:"font-extrabold"},"+1"),r(" балл к рейтингу участницы")])],-1),be=o("div",{class:"text-center"},[r("Участница увидит что именно "),o("b",null,"ВЫ"),r(" добавили баллы")],-1),ke=o("div",{class:"text-center"},[r("Участница увидит что именно "),o("b",null,"ВЫ"),r(" добавили баллы")],-1),Ne=o("div",{class:"text-center"},[r("Участница увидит что именно "),o("b",null,"ВЫ"),r(" добавили баллы")],-1),ze=o("div",{class:"text-center"},[r("Участница увидит что именно "),o("b",null,"ВЫ"),r(" добавили баллы")],-1),Le={class:"text-lg font-bold"},Se=N({__name:"ContestCard",props:{contestItem:{},contestName:{default:""},isEndingContest:{type:Boolean,default:!1}},emits:["save"],setup($,{emit:i}){const _=$,{contestItem:n}=q(_),c=i,g=M(()=>!n.value.is_free_payment),f=async d=>{try{if(!g.value){const l={type:d,model_id:n.value.user.id};await P.freeVoting(l),c("save")}}catch(l){console.log(l)}},a=async d=>{const l={type:d,model_id:n.value.user.id},u=await P.premiumVoting(l);window.open(u.link,"_blank"),c("save")};return(d,l)=>(p(),v("div",ye,[o("div",xe,[d.contestName?(p(),v("div",we,"Конкурс: "+w(d.contestName),1)):S("",!0),s(e(Q),{title:"Рейтинг:"+e(n).rating,type:"success"},null,8,["title"])]),o("div",$e,[s(e(X),{src:e(n).photo,height:"100%",width:"100%","max-height":"100%","max-width":"100%",class:"w-full h-full"},null,8,["src"])]),d.isEndingContest?S("",!0):(p(),z(e(j),{key:0,"x-gap":12,"y-gap":12,cols:3,class:"w-full mt-4"},{default:t(()=>[s(e(A),null,{default:t(()=>[s(e(x),{vertical:""},{default:t(()=>[s(e(L),{trigger:"hover",placement:"bottom"},{trigger:t(()=>[s(e(h),{strong:"",secondary:"",size:"large",circle:"",type:"warning",disabled:g.value,onClick:l[0]||(l[0]=u=>f(1))},{default:t(()=>[s(e(D),{size:24,component:W(e(ee))},null,8,["component"])]),_:1},8,["disabled"])]),default:t(()=>[Ce]),_:1})]),_:1})]),_:1}),s(e(A),{span:2},{default:t(()=>[s(e(x),{vertical:"",align:"end"},{default:t(()=>[s(e(x),null,{default:t(()=>[s(e(L),{trigger:"hover",placement:"bottom"},{trigger:t(()=>[s(e(h),{strong:"",secondary:"",size:"large",circle:"",type:"warning",onClick:l[1]||(l[1]=u=>a(5))},{default:t(()=>[r(" +5 ")]),_:1})]),default:t(()=>[be]),_:1}),s(e(L),{trigger:"hover",placement:"bottom"},{trigger:t(()=>[s(e(h),{strong:"",secondary:"",size:"large",circle:"",type:"warning",onClick:l[2]||(l[2]=u=>a(15))},{default:t(()=>[r(" +15 ")]),_:1})]),default:t(()=>[ke]),_:1}),s(e(L),{trigger:"hover",placement:"bottom"},{trigger:t(()=>[s(e(h),{strong:"",secondary:"",size:"large",circle:"",type:"warning",onClick:l[3]||(l[3]=u=>a(25))},{default:t(()=>[r(" +25 ")]),_:1})]),default:t(()=>[Ne]),_:1}),s(e(L),{trigger:"hover",placement:"bottom"},{trigger:t(()=>[s(e(h),{strong:"",secondary:"",size:"large",circle:"",type:"warning",onClick:l[4]||(l[4]=u=>a(50))},{default:t(()=>[r(" +50 ")]),_:1})]),default:t(()=>[ze]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})),s(e(x),{class:"mt-4"},{default:t(()=>[o("div",Le,w(e(n).user.name),1)]),_:1})]))}}),Ee={key:1},Me=N({__name:"ContestActiveUsers",props:{isActiveContest:{type:Boolean,default:!0}},setup($){const i=k(null),_=async()=>{try{const n=await U.allModelList();i.value=n.data.contest}catch(n){console.log(n)}};return T(async()=>{await _()}),(n,c)=>i.value&&i.value.users.length>0?(p(),z(e(j),{key:0,cols:"2 m:3 l:4","x-gap":10,"y-gap":10,responsive:"screen"},{default:t(()=>[(p(!0),v(I,null,V(i.value.users,(g,f)=>(p(),z(e(A),{key:f},{default:t(()=>[s(Se,{"contest-item":g,"is-ending-contest":!n.isActiveContest,onSave:c[0]||(c[0]=a=>_())},null,8,["contest-item","is-ending-contest"])]),_:2},1024))),128))]),_:1})):(p(),v("div",Ee,[s(e(se),{description:"Участниц пока нет("},{icon:t(()=>[s(e(D),{size:36,color:"#19A058"},{default:t(()=>[s(e(ne))]),_:1})]),_:1})]))}}),Ae={class:"text-[64px]"},Ie=o("div",{class:"text-xl md:text-3xl max-w-[1024px] text-center text-gray-500"}," Присоединяйтесь к нашему фотоконкурсу и продемонстрируйте свой уникальный взгляд на мир. Мы ищем потрясающие, оригинальные изображения, которые рассказывают историю и вызывают эмоции. Независимо от того, являетесь ли вы опытным профессионалом или начинающим любителем, мы приветствуем ваши работы! ",-1),Te={class:"mt-6"},Ue={class:"text-3xl text-center"},Fe={class:"text-gray-800 cursor-pointer absolute bottom-2 md:bottom-8 left-1/2 transform -translate-x-1/2 -translate-y-1/2"},Be={class:"animate-bounce"},Pe=N({__name:"ContestWelcome",props:{contest:{}},setup($){return(i,_)=>(p(),z(e(x),{vertical:"",align:"center",class:"h-screen",justify:"center"},{default:t(()=>[s(e(E),{type:"success"},{default:t(()=>[o("div",Ae,w(i.contest.name),1)]),_:1}),Ie,o("div",Te,[o("span",Ue,[r("c "),s(e(E),{type:"info"},{default:t(()=>[o("div",null,w(i.contest.start),1)]),_:1}),r(" по "),s(e(E),{type:"error"},{default:t(()=>[o("div",null,w(i.contest.finish),1)]),_:1})])]),o("div",Fe,[o("div",Be,[s(e(oe),{size:48})])])]),_:1}))}}),Ve={key:0,class:"h-full relative"},Oe={key:0,class:"flex items-center justify-center mt-16 w-full"},Re={class:"mt-16"},je=o("div",{class:"text-xl md:text-[48px] mb-16"},"Участницы конкурса",-1),lt=N({__name:"index",setup($){const i=Y(),_=O(),{user:n}=R(_),c=k(null),g=async()=>{try{const a=await U.prizeList(),{data:d}=a;c.value=d.contest}catch(a){console.log(a)}},f=M(()=>{if(c.value.prizes){if(i.isMobile)return c.value.prizes;const a=c.value.prizes.sort((y,C)=>y.place-C.place),d=a.findIndex(y=>y.place===2),l=a.splice(d,1)[0];a.unshift(l);const u=a.findIndex(y=>y.place===1),b=a.splice(u,1)[0],m=Math.floor(a.length/2);return a.splice(m,0,b),a}return[]});return T(()=>{g()}),(a,d)=>{const l=ue,u=he;return c.value?(p(),v("div",Ve,[s(Pe,{contest:c.value},null,8,["contest"]),s(l,{"prize-list":f.value},null,8,["prize-list"]),e(n).role===e(K).MODEL_ACCOUNT?(p(),v("div",Oe,[s(u)])):S("",!0),o("div",Re,[je,s(Me,{"is-active-contest":c.value.active},null,8,["is-active-contest"])])])):S("",!0)}}});export{lt as default};
