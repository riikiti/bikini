import{_ as R}from"./nuxt-link.eb8P9XSI.js";import{H as T,X as F,Y as M,ac as I,L as f,a0 as d,o as i,c as n,a as c,R as e,Z as O,w as r,b as s,O as V,d as $,t as v,_,a9 as B,a1 as h}from"./entry.BxACjir3.js";import{_ as L}from"./user-default.J5rh2Wyq.js";import{T as g,S as H}from"./usersRepository.69hWuVBz.js";import{N as P}from"./Tag.ZgqvSv-f.js";import{M as j}from"./mail.llO9Z4tf.js";import{H as A}from"./heart.Qh55_-Pb.js";import{u as G}from"./use-message.h2iD4A0J.js";import{N as l}from"./createLucideIcon._MYShXvW.js";const W={class:"rounded overflow-hidden relative bg-white dark:bg-muted border shadow-accent"},D={class:"absolute top-2 left-2 z-20"},X=["src"],Y={key:1,src:L,class:"w-full h-full object-cover"},Z={class:"space-y-1 mt-3"},q={class:"text-xl font-medium leading-none"},J={class:"grid grid-cols-5 mt-2 self-center pb-2 pt-2"},K={key:0,class:"text-gray-300 hover:text-red-600"},Q={key:1,class:"text-gray-300 hover:text-red-600"},U={key:2,class:"text-gray-300 hover:text-red-600"},de=T({__name:"users-card",props:{card:{}},emits:["update"],setup(x,{emit:y}){const m=G(),k=F(),w=M(),N=y,b=x,{card:t}=I(b),E=f(()=>{const{info:{messages_status:o}}=t.value;if(o){for(const a in o)if(o[a]!==!1&&o[a]!==null)return!0}return!1}),S=async()=>{try{if(t.value.is_favorite){const o=await h.removeFromFavourite(t.value.id);m.warning(o)}else{const o=await h.addToFavourite(t.value.id);m.success(o)}await k.setSettings(),await N("update")}catch{m.error("Ooops!Что-то пошло не так!")}},z=f(()=>d.MESSENGER+`/${t.value.id}`);return(o,a)=>{var p;const u=R;return i(),n("div",W,[c("div",D,[(p=e(t))!=null&&p.rating?(i(),O(e(P),{key:0,round:"",strong:"",bordered:!1},{icon:r(()=>[s(e(l),{component:V(e(g))},null,8,["component"])]),default:r(()=>[$(" "+v(e(t).rating),1)]),_:1})):_("",!0)]),c("div",{class:"h-[250px] relative overflow-hidden rounded-md hover:cursor-pointer",onClick:a[0]||(a[0]=C=>e(w).push(e(d).PROFILE+`${e(t).id}`))},[e(t).avatar?(i(),n("img",{key:0,src:e(t).avatar,width:"100%",height:"100%",class:"w-full h-full object-cover"},null,8,X)):(i(),n("img",Y))]),c("div",Z,[s(u,{to:e(d).PROFILE+`${e(t).id}`,class:"text-black no-underline"},{default:r(()=>[c("h3",q,v(e(t).name),1)]),_:1},8,["to"])]),c("div",J,[E.value?(i(),n("div",K,[s(u,{to:z.value,class:"text-gray-300 hover:text-red-600 cursor-pointer"},{default:r(()=>[s(e(l),{size:32},{default:r(()=>[s(e(j),{size:32})]),_:1})]),_:1},8,["to"])])):_("",!0),e(t).active_contest?(i(),n("div",Q,[s(u,{to:e(d).ACTIVE_CONTEST,class:"text-gray-300 hover:text-red-600 cursor-pointer"},{default:r(()=>[s(e(l),{size:32},{default:r(()=>[s(e(H),{fill:"currentColor"})]),_:1})]),_:1},8,["to"])])):_("",!0),c("div",{class:B(["text-gray-300 hover:text-red-600 cursor-pointer",{"text-red-600":e(t).is_favorite}]),onClick:a[1]||(a[1]=C=>S())},[s(e(l),{size:32},{default:r(()=>[s(e(A),{size:32})]),_:1})],2),e(t).is_winner?(i(),n("div",U,[s(u,{to:e(d).WINNER_PAGE,class:"text-red-600 cursor-pointer"},{default:r(()=>[s(e(l),{size:32},{default:r(()=>[s(e(g),{size:32})]),_:1})]),_:1},8,["to"])])):_("",!0)])])}}});export{de as _};
