import{H as N,o as d,c as x,F as U,V as R,a as o,a7 as I,t as b,a2 as A,r as k,L as E,a1 as z,w as t,b as s,U as e,Y as w,d as a,a8 as H,Z as F,a9 as P,a6 as V,a4 as M,aa as q,O as W,ab as O,_ as Y}from"./entry.Ka6ubjYN.js";import{_ as j}from"./nuxt-link.7NJpkCmd.js";import{_ as Z,N as T,a as D}from"./FileUpload.vue.e1ksyAJR.js";import{u as J}from"./use-message.xS_Dlh0d.js";import{N as $}from"./Space.3_I-lCIJ.js";import{c as B}from"./contestRepository.wuJTqtC2.js";import{N as S}from"./GradientText.-eMpi42z.js";import{E as K}from"./EUserAccoutType.8nCACn_d.js";import{N as Q,a as L}from"./Image.pJIEIRot.js";import{T as X}from"./thumbs-up.9izsIWp6.js";import{N as ee}from"./Alert.UAYY5UCM.js";import{c as te,N as G}from"./createLucideIcon.uAdNMltd.js";import{N as se}from"./Empty.-TvlHShK.js";import{C as oe}from"./chevron-down._9PVPt1c.js";import"./get-slot.bpfTnPl7.js";import"./Popover.EcQVyUUZ.js";import"./format-length.4l65r8M5.js";import"./use-merged-state.dZIrPwb1.js";import"./use-houdini.ce6Vopfm.js";import"./utils.KKsyjsON.js";/**
 * @license lucide-vue-next v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=te("CameraIcon",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),ae={id:"prizes",class:"pb-12"},le=o("div",{class:"text-xl md:text-[48px] mb-16"},"Наши призы",-1),re={key:0,class:"gap-8 columns-1 md:columns-3 h-full my-8"},ie={class:"relative"},ce=["src"],de={class:"text-2xl text-center mt-3"},ue=N({__name:"ContestPrizeSection",props:{prizeList:{}},setup(C){return(i,v)=>(d(),x("div",ae,[le,i.prizeList.length?(d(),x("div",re,[(d(!0),x(U,null,R(i.prizeList,(l,c)=>(d(),x("div",{key:c,class:"flex flex-col items-center"},[o("div",ie,[o("div",{class:I(["w-[200px] h-[200px] rounded-full shadow-lg flex overflow-hidden relative",{"-mt-12":l.place===1}])},[o("img",{src:l.image,alt:""},null,8,ce)],2),o("div",{class:I(["absolute w-[48px] h-[48px] rounded-full  bottom-2 left-1/2 transform -translate-x-1/2 translate-y-1/2 flex items-center justify-center font-bold text-2xl",{"bg-yellow-300":l.place===1},{"bg-cyan-400":l.place===2},{"bg-violet-400":l.place===3}])},b(l.place),3)]),o("div",de,b(l.name),1),o("div",null,b(l.description),1)]))),128))])):A("",!0)]))}}),pe=o("div",null,"Конкурс",-1),me=N({__name:"ContestUserModal",props:{isEdit:{type:Boolean}},emits:["formsave"],setup(C,{emit:i}){const v=C,l=i,c=J(),u=()=>{c.success("Submit"),l("formsave",r.value)},g=()=>{l("formclose")},r=k(null),m=p=>{r.value=p,console.log("file-upload: ",r.value)},h=k({add:{route:"/api/auth/active-contest/add-photo",method:"POST"},update:{route:"/api/auth/active-contest/add-photo",method:"POST"}}),_=E(()=>h.value[v.isEdit?"update":"add"]);return console.log(_),(p,n)=>{const f=Z;return d(),z(e(H),{preset:"dialog"},{header:t(()=>[pe]),action:t(()=>[s(e($),{size:"large"},{default:t(()=>[s(e(w),{type:"error",onClick:n[0]||(n[0]=y=>g())},{default:t(()=>[a("Отмена")]),_:1}),s(e(w),{type:"primary",onClick:n[1]||(n[1]=y=>u())},{default:t(()=>[a("Сохранить")]),_:1})]),_:1})]),default:t(()=>[o("div",null,[s(f,{route:e(_).route,method:e(_).method,onUploaded:m},null,8,["route","method"])])]),_:1})}}}),_e={class:"w-full"},fe={key:1,class:"bg-gray-100/50 w-full py-8"},ve={class:"text-2xl"},ge=["src"],he=N({__name:"ContestUser",setup(C){const i=k(!1),v=F();P(v);const l=()=>{i.value=!0,h()},c=k(null),u=async()=>{console.log("saver");const{data:p}=await B.currentUserList();c.value=p.contest_model,console.log(c.value)},g=E(()=>c.value),r=async()=>{await u(),await v.profile(),_()},m=k(!1),h=()=>{m.value=!m.value},_=()=>{m.value=!1,i.value=!1};return V(async()=>{await u()}),(p,n)=>{const f=j;return d(),x(U,null,[o("div",_e,[e(g)?(d(),x("div",fe,[s(e($),{vertical:"",size:"large",align:"center"},{default:t(()=>[o("div",ve,[a(" Я участница конкурса,мой рейтинг "),s(e(S),{gradient:"linear-gradient(to right, #8a2387, #e94057, #f27121)"},{default:t(()=>[a(b(e(g).rating),1)]),_:1})]),o("div",null,[o("img",{src:e(g).photo,alt:"",class:"w-[150px] h-[150px]"},null,8,ge)]),s(e($),{class:"mt-6"},{default:t(()=>[s(f,{to:e(M).PROFILE+`${e(g).user.id}`},{default:t(()=>[s(e(w),{class:"uppercase",type:"primary",size:"large",dashed:""},{default:t(()=>[a("Мой Профиль")]),_:1})]),_:1},8,["to"]),s(e(w),{class:"uppercase",type:"primary",size:"large",dashed:"",onClick:l},{default:t(()=>[a("Обновить фото")]),_:1}),s(f,{to:e(M).STATISTICS},{default:t(()=>[s(e(w),{class:"uppercase",type:"primary",size:"large",dashed:""},{default:t(()=>[a("Статистика")]),_:1})]),_:1},8,["to"])]),_:1})]),_:1})])):(d(),z(e($),{key:0,justify:"center"},{default:t(()=>[s(e(w),{type:"info",size:"large",class:"md:text-3xl md:py-8",onClick:n[0]||(n[0]=y=>h())},{default:t(()=>[a("Стать участником конкурса")]),_:1})]),_:1}))]),s(e(me),{show:m.value,"onUpdate:show":n[1]||(n[1]=y=>m.value=y),"is-edit":i.value,onFormsave:r,onFormclose:n[2]||(n[2]=y=>_()),onClose:n[3]||(n[3]=y=>_())},null,8,["show","is-edit"])],64)}}}),ye={class:"mb-2 flex justify-between items-center"},xe={key:0},we={class:"h-[250px] overflow-hidden rounded w-full max-h-full"},$e=o("div",{class:"text-center"},[o("span",null,[o("b",{class:"font-extrabold"},"+1"),a(" балл к рейтингу участницы")])],-1),be=o("div",{class:"text-center"},[a("Участница увидит что именно "),o("b",null,"ВЫ"),a(" добавили баллы")],-1),Ce=o("div",{class:"text-center"},[a("Участница увидит что именно "),o("b",null,"ВЫ"),a(" добавили баллы")],-1),ke=o("div",{class:"text-center"},[a("Участница увидит что именно "),o("b",null,"ВЫ"),a(" добавили баллы")],-1),Ne=o("div",{class:"text-center"},[a("Участница увидит что именно "),o("b",null,"ВЫ"),a(" добавили баллы")],-1),ze={key:1,class:"font-medium text-lg w-full break-words text-center my-4"},Le=N({__name:"ContestCard",props:{contestItem:{},contestName:{default:""},isEndingContest:{type:Boolean,default:!1}},emits:["save"],setup(C,{emit:i}){const v=C,l=F(),{user:c}=P(l),{contestItem:u}=q(v),g=i,r=E(()=>!u.value.is_free_payment),m=async p=>{try{if(!r.value){const n={type:p,model_id:u.value.user.id};await O.freeVoting(n),g("save")}}catch(n){console.log(n)}},h=async p=>{const n={type:p,model_id:u.value.user.id},f=await O.premiumVoting(n);window.open(f.link,"_blank"),g("save")},_=E(()=>u.value.user.id!==c.value.id);return(p,n)=>{const f=j;return d(),x("div",{class:I(["flex flex-col p-4 rounded-lg overflow-hidden shadow",{"shadow-blue-300 shadow-lg":!_.value}])},[o("div",ye,[p.contestName?(d(),x("div",xe,"Конкурс: "+b(p.contestName),1)):A("",!0),s(e(ee),{title:"Рейтинг:"+e(u).rating,type:"success"},null,8,["title"])]),o("div",we,[s(e(Q),{src:e(u).photo,height:"100%",width:"100%","max-height":"100%","max-width":"100%",class:"w-full h-full"},null,8,["src"])]),!p.isEndingContest&&_.value?(d(),z(e(D),{key:0,"x-gap":12,"y-gap":12,cols:3,class:"w-full mt-4"},{default:t(()=>[s(e(T),null,{default:t(()=>[s(e($),{vertical:""},{default:t(()=>[s(e(L),{trigger:"hover",placement:"bottom"},{trigger:t(()=>[s(e(w),{strong:"",secondary:"",size:"large",circle:"",type:"warning",disabled:r.value,onClick:n[0]||(n[0]=y=>m(1))},{default:t(()=>[s(e(G),{size:24,component:W(e(X))},null,8,["component"])]),_:1},8,["disabled"])]),default:t(()=>[$e]),_:1})]),_:1})]),_:1}),s(e(T),{span:2},{default:t(()=>[s(e($),{vertical:"",align:"end"},{default:t(()=>[s(e($),null,{default:t(()=>[s(e(L),{trigger:"hover",placement:"bottom"},{trigger:t(()=>[s(e(w),{strong:"",secondary:"",size:"large",circle:"",type:"warning",onClick:n[1]||(n[1]=y=>h(5))},{default:t(()=>[a(" +5 ")]),_:1})]),default:t(()=>[be]),_:1}),s(e(L),{trigger:"hover",placement:"bottom"},{trigger:t(()=>[s(e(w),{strong:"",secondary:"",size:"large",circle:"",type:"warning",onClick:n[2]||(n[2]=y=>h(15))},{default:t(()=>[a(" +15 ")]),_:1})]),default:t(()=>[Ce]),_:1}),s(e(L),{trigger:"hover",placement:"bottom"},{trigger:t(()=>[s(e(w),{strong:"",secondary:"",size:"large",circle:"",type:"warning",onClick:n[3]||(n[3]=y=>h(25))},{default:t(()=>[a(" +25 ")]),_:1})]),default:t(()=>[ke]),_:1}),s(e(L),{trigger:"hover",placement:"bottom"},{trigger:t(()=>[s(e(w),{strong:"",secondary:"",size:"large",circle:"",type:"warning",onClick:n[4]||(n[4]=y=>h(50))},{default:t(()=>[a(" +50 ")]),_:1})]),default:t(()=>[Ne]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):(d(),x("div",ze,[s(e(S),null,{default:t(()=>[a("Это ВЫ! ")]),_:1})])),s(e($),{class:"mt-4"},{default:t(()=>[s(f,{to:e(M).PROFILE+`${e(u).user.id}`,class:"no-underline text-lg font-bold text-black"},{default:t(()=>[a(b(e(u).user.name),1)]),_:1},8,["to"])]),_:1})],2)}}}),Se={key:1},Ee=N({__name:"ContestActiveUsers",props:{isActiveContest:{type:Boolean,default:!0}},setup(C){const i=k(null),v=async()=>{try{const l=await B.allModelList();i.value=l.data.contest}catch(l){console.log(l)}};return V(async()=>{await v()}),(l,c)=>i.value&&i.value.users.length>0?(d(),z(e(D),{key:0,cols:"1 s:2 m:3 l:4","x-gap":10,"y-gap":10,responsive:"screen"},{default:t(()=>[(d(!0),x(U,null,R(i.value.users,(u,g)=>(d(),z(e(T),{key:g},{default:t(()=>[s(Le,{"contest-item":u,"is-ending-contest":!l.isActiveContest,onSave:c[0]||(c[0]=r=>v())},null,8,["contest-item","is-ending-contest"])]),_:2},1024))),128))]),_:1})):(d(),x("div",Se,[s(e(se),{description:"Участниц пока нет"},{icon:t(()=>[s(e(G),{size:36,color:"#19A058"},{default:t(()=>[s(e(ne))]),_:1})]),_:1})]))}}),Ae={class:"text-[64px]"},Ie=o("div",{class:"text-xl md:text-3xl max-w-[1024px] text-center text-gray-500"}," Присоединяйтесь к нашему фотоконкурсу и продемонстрируйте свой уникальный взгляд на мир. Мы ищем потрясающие, оригинальные изображения, которые рассказывают историю и вызывают эмоции. Независимо от того, являетесь ли вы опытным профессионалом или начинающим любителем, мы приветствуем ваши работы! ",-1),Me={class:"mt-6"},Te={class:"text-3xl text-center"},Ue={class:"text-gray-800 cursor-pointer absolute bottom-2 md:bottom-8 left-1/2 transform -translate-x-1/2 -translate-y-1/2"},Fe={class:"animate-bounce"},Pe=N({__name:"ContestWelcome",props:{contest:{}},setup(C){return(i,v)=>(d(),z(e($),{vertical:"",align:"center",class:"h-screen",justify:"center"},{default:t(()=>[s(e(S),{type:"success"},{default:t(()=>[o("div",Ae,b(i.contest.name),1)]),_:1}),Ie,o("div",Me,[o("span",Te,[a("c "),s(e(S),{type:"info"},{default:t(()=>[o("div",null,b(i.contest.start),1)]),_:1}),a(" по "),s(e(S),{type:"error"},{default:t(()=>[o("div",null,b(i.contest.finish),1)]),_:1})])]),o("div",Ue,[o("div",Fe,[s(e(oe),{size:48})])])]),_:1}))}}),Ve={key:0,class:"h-full relative"},Be={key:0,class:"flex items-center justify-center mt-16 w-full"},Oe={class:"mt-16"},Re=o("div",{class:"text-xl md:text-[48px] mb-16"},"Участницы конкурса",-1),it=N({__name:"index",setup(C){const i=Y(),v=F(),{user:l}=P(v),c=k(null),u=async()=>{try{const r=await B.prizeList(),{data:m}=r;c.value=m.contest}catch(r){console.log(r)}},g=E(()=>{if(c.value.prizes){if(i.isMobile)return c.value.prizes;const r=c.value.prizes.sort((f,y)=>f.place-y.place),m=r.findIndex(f=>f.place===2),h=r.splice(m,1)[0];r.unshift(h);const _=r.findIndex(f=>f.place===1),p=r.splice(_,1)[0],n=Math.floor(r.length/2);return r.splice(n,0,p),r}return[]});return V(()=>{u()}),(r,m)=>{const h=ue,_=he;return c.value?(d(),x("div",Ve,[s(Pe,{contest:c.value},null,8,["contest"]),s(h,{"prize-list":g.value},null,8,["prize-list"]),e(l).role===e(K).MODEL_ACCOUNT?(d(),x("div",Be,[s(_)])):A("",!0),o("div",Oe,[Re,s(Ee,{"is-active-contest":c.value.active},null,8,["is-active-contest"])])])):A("",!0)}}});export{it as default};
