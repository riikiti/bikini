import{H as N,o as p,c as v,F as U,S as O,a as o,a9 as T,t as b,_ as I,r as C,L as A,Z as z,w as t,b as s,R as e,V as x,d as l,aa as H,W as P,ab as R,a8 as j,a0 as M,Y as W,ac as X,O as Y,a1 as B,X as Z}from"./entry.BxACjir3.js";import{_ as G}from"./nuxt-link.eb8P9XSI.js";import{_ as J,N as F,a as q}from"./FileUpload.6lV3YdV8.js";import{u as K}from"./use-message.h2iD4A0J.js";import{N as $}from"./Space.enU26mD1.js";import{c as V}from"./contestRepository.bRpim0VN.js";import{N as E}from"./GradientText.vbGKcEoY.js";import{E as Q}from"./EUserAccoutType.8nCACn_d.js";import{N as S}from"./Tooltip.fsOaY3Xi.js";import{T as ee}from"./thumbs-up.0Y0qYaT1.js";import{N as te}from"./Alert.UG-w-QwQ.js";import{c as se,N as D}from"./createLucideIcon._MYShXvW.js";import{N as oe}from"./Empty.BD-YEQ_t.js";import"./get-slot.bpfTnPl7.js";import"./Popover.hcZ34Xgn.js";import"./use-locale.1asvigIv.js";import"./format-length.4l65r8M5.js";import"./use-merged-state.IK4YFogi.js";import"./_plugin-vue_export-helper.x3n3nnut.js";import"./use-houdini.-oibNbo1.js";/**
 * @license lucide-vue-next v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=se("CameraIcon",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),le={id:"prizes",class:"pb-12"},ae=o("div",{class:"text-[48px] mb-8 sm:mb-16 text-center"},"Наши призы",-1),re={key:0,class:"flex flex-col justify-center sm:flex-row md:columns-3 h-full md:gap-8"},ie={class:"relative"},ce=["src"],de={class:"text-2xl text-center mt-3"},ue=N({__name:"ContestPrizeSection",props:{prizeList:{}},setup(k){return(c,f)=>(p(),v("div",le,[ae,c.prizeList.length?(p(),v("div",re,[(p(!0),v(U,null,O(c.prizeList,(a,d)=>(p(),v("div",{key:d,class:"flex flex-col items-center my-4 min-h-[200px]"},[o("div",ie,[o("div",{class:T(["w-[200px] h-[200px] rounded-full shadow-lg  overflow-hidden relative object-cover",{"md:-mt-12":a.place===1}])},[o("img",{src:a.image,class:"max-w-full max-h-full h-full w-full object-cover"},null,8,ce)],2),o("div",{class:T(["absolute w-[48px] h-[48px] rounded-full  bottom-2 left-1/2 transform -translate-x-1/2 translate-y-1/2 flex items-center justify-center font-bold text-2xl",{"bg-yellow-300":a.place===1},{"bg-cyan-400":a.place===2},{"bg-violet-400":a.place===3}])},b(a.place),3)]),o("div",de,b(a.name),1),o("div",null,b(a.description),1)]))),128))])):I("",!0)]))}}),pe=o("div",null,"Конкурс",-1),me=N({__name:"ContestUserModal",props:{isEdit:{type:Boolean}},emits:["formsave"],setup(k,{emit:c}){const f=k,a=c,d=K(),h=()=>{d.success("Submit"),a("formsave",r.value)},u=()=>{a("formclose")},r=C(null),_=w=>{r.value=w,console.log("file-upload: ",r.value)},y=C({add:{route:"/api/auth/active-contest/add-photo",method:"POST"},update:{route:"/api/auth/active-contest/add-photo",method:"POST"}}),m=A(()=>y.value[f.isEdit?"update":"add"]);return console.log(m),(w,i)=>{const n=J;return p(),z(e(H),{preset:"dialog"},{header:t(()=>[pe]),action:t(()=>[s(e($),{size:"large"},{default:t(()=>[s(e(x),{type:"error",onClick:i[0]||(i[0]=g=>u())},{default:t(()=>[l("Отмена")]),_:1}),s(e(x),{type:"primary",onClick:i[1]||(i[1]=g=>h())},{default:t(()=>[l("Сохранить")]),_:1})]),_:1})]),default:t(()=>[o("div",null,[s(n,{route:e(m).route,method:e(m).method,onUploaded:_},null,8,["route","method"])])]),_:1})}}}),_e={class:"w-full"},fe={key:1,class:"bg-gray-100/50 w-full py-8"},ve={class:"text-xl sm:text-2xl"},ge=["src"],xe=N({__name:"ContestUser",setup(k){const c=C(!1),f=P();R(f);const a=()=>{c.value=!0,y()},d=C(null),h=async()=>{console.log("saver");const{data:w}=await V.currentUserList();d.value=w.contest_model,console.log(d.value)},u=A(()=>d.value),r=async()=>{await h(),await f.profile(),m()},_=C(!1),y=()=>{_.value=!_.value},m=()=>{_.value=!1,c.value=!1};return j(async()=>{await h()}),(w,i)=>{const n=G;return p(),v(U,null,[o("div",_e,[e(u)?(p(),v("div",fe,[s(e($),{vertical:"",size:"large",align:"center"},{default:t(()=>[o("div",ve,[l(" Я участница конкурса,мой рейтинг "),s(e(E),{gradient:"linear-gradient(to right, #8a2387, #e94057, #f27121)"},{default:t(()=>[l(b(e(u).rating),1)]),_:1})]),o("div",null,[o("img",{src:e(u).photo,alt:"",class:"w-[150px] h-[150px]"},null,8,ge)]),s(e($),{class:"mt-6"},{default:t(()=>[s(n,{to:e(M).PROFILE+`${e(u).user.id}`},{default:t(()=>[s(e(x),{class:"uppercase",type:"primary",size:"large",dashed:""},{default:t(()=>[l("Мой Профиль")]),_:1})]),_:1},8,["to"]),s(e(x),{class:"uppercase",type:"primary",size:"large",dashed:"",onClick:a},{default:t(()=>[l("Обновить фото")]),_:1}),s(n,{to:e(M).STATISTICS},{default:t(()=>[s(e(x),{class:"uppercase",type:"primary",size:"large",dashed:""},{default:t(()=>[l("Статистика")]),_:1})]),_:1},8,["to"])]),_:1})]),_:1})])):(p(),z(e($),{key:0,justify:"center"},{default:t(()=>[s(e(x),{type:"info",size:"large",class:"md:text-3xl md:py-8",onClick:i[0]||(i[0]=g=>y())},{default:t(()=>[l("Стать участником конкурса")]),_:1})]),_:1}))]),s(e(me),{show:_.value,"onUpdate:show":i[1]||(i[1]=g=>_.value=g),"is-edit":c.value,onFormsave:r,onFormclose:i[2]||(i[2]=g=>m()),onClose:i[3]||(i[3]=g=>m())},null,8,["show","is-edit"])],64)}}}),he={class:"mb-2 flex justify-between items-center"},ye={key:0},we=["src"],$e=o("div",{class:"text-center"},[o("span",null,[o("b",{class:"font-extrabold"},"+1"),l(" балл к рейтингу участницы")])],-1),be=o("div",{class:"text-center"},[l("Участница увидит что именно "),o("b",null,"ВЫ"),l(" добавили баллы")],-1),ke=o("div",{class:"text-center"},[l("Участница увидит что именно "),o("b",null,"ВЫ"),l(" добавили баллы")],-1),Ce=o("div",{class:"text-center"},[l("Участница увидит что именно "),o("b",null,"ВЫ"),l(" добавили баллы")],-1),Ne=o("div",{class:"text-center"},[l("Участница увидит что именно "),o("b",null,"ВЫ"),l(" добавили баллы")],-1),ze={key:1,class:"font-medium text-lg w-full break-words text-center my-4"},Le=N({__name:"ContestCard",props:{contestItem:{},contestName:{default:""},isEndingContest:{type:Boolean,default:!1}},emits:["save"],setup(k,{emit:c}){const f=k,a=P(),{user:d}=R(a),h=W(),{contestItem:u}=X(f),r=c,_=A(()=>u.value.is_free_payment),y=async i=>{try{if(!_.value){const n={type:i,model_id:u.value.user.id};await B.freeVoting(n),r("save")}}catch(n){console.log(n)}},m=async i=>{const n={type:i,model_id:u.value.user.id},g=await B.premiumVoting(n);window.open(g.link,"_blank"),r("save")},w=A(()=>u.value.user.id!==d.value.id);return(i,n)=>{const g=G;return p(),v("div",{class:T(["flex flex-col p-4 rounded-lg overflow-hidden shadow",{"shadow-blue-300 shadow-lg":!w.value}])},[o("div",he,[i.contestName?(p(),v("div",ye,"Конкурс: "+b(i.contestName),1)):I("",!0),s(e(te),{title:"Рейтинг:"+e(u).rating,type:"success"},null,8,["title"])]),o("div",{class:"h-[250px] overflow-hidden rounded w-full max-h-full hover:cursor-pointer",onClick:n[0]||(n[0]=L=>e(h).push(e(M).PROFILE+`${e(u).user.id}`))},[o("img",{src:e(u).photo,class:"w-full h-full max-w-full max-h-full aspect-square object-cover"},null,8,we)]),!i.isEndingContest&&w.value?(p(),z(e(q),{key:0,"x-gap":12,"y-gap":12,cols:3,class:"w-full mt-4"},{default:t(()=>[s(e(F),null,{default:t(()=>[s(e($),{vertical:""},{default:t(()=>[s(e(S),{trigger:"hover",placement:"bottom"},{trigger:t(()=>[s(e(x),{strong:"",secondary:"",size:"large",circle:"",type:"warning",disabled:_.value,onClick:n[1]||(n[1]=L=>y(1))},{default:t(()=>[s(e(D),{size:24,component:Y(e(ee))},null,8,["component"])]),_:1},8,["disabled"])]),default:t(()=>[$e]),_:1})]),_:1})]),_:1}),s(e(F),{span:2},{default:t(()=>[s(e($),{vertical:"",align:"end"},{default:t(()=>[s(e($),null,{default:t(()=>[s(e(S),{trigger:"hover",placement:"bottom"},{trigger:t(()=>[s(e(x),{strong:"",secondary:"",size:"large",circle:"",type:"warning",onClick:n[2]||(n[2]=L=>m(5))},{default:t(()=>[l(" +5 ")]),_:1})]),default:t(()=>[be]),_:1}),s(e(S),{trigger:"hover",placement:"bottom"},{trigger:t(()=>[s(e(x),{strong:"",secondary:"",size:"large",circle:"",type:"warning",onClick:n[3]||(n[3]=L=>m(15))},{default:t(()=>[l(" +15 ")]),_:1})]),default:t(()=>[ke]),_:1}),s(e(S),{trigger:"hover",placement:"bottom"},{trigger:t(()=>[s(e(x),{strong:"",secondary:"",size:"large",circle:"",type:"warning",onClick:n[4]||(n[4]=L=>m(25))},{default:t(()=>[l(" +25 ")]),_:1})]),default:t(()=>[Ce]),_:1}),s(e(S),{trigger:"hover",placement:"bottom"},{trigger:t(()=>[s(e(x),{strong:"",secondary:"",size:"large",circle:"",type:"warning",onClick:n[5]||(n[5]=L=>m(50))},{default:t(()=>[l(" +50 ")]),_:1})]),default:t(()=>[Ne]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):(p(),v("div",ze,[s(e(E),null,{default:t(()=>[l("Это ВЫ! ")]),_:1})])),s(e($),{class:"mt-4"},{default:t(()=>[s(g,{to:e(M).PROFILE+`${e(u).user.id}`,class:"no-underline text-lg font-bold text-black"},{default:t(()=>[l(b(e(u).user.name),1)]),_:1},8,["to"])]),_:1})],2)}}}),Se={key:1},Ee=N({__name:"ContestActiveUsers",props:{isActiveContest:{type:Boolean,default:!0}},setup(k){const c=C(null),f=async()=>{try{const a=await V.allModelList();c.value=a.data.contest}catch(a){console.log(a)}};return j(async()=>{await f()}),(a,d)=>c.value&&c.value.users.length>0?(p(),z(e(q),{key:0,cols:"1 xs:2 m:3 l:4","x-gap":10,"y-gap":10,responsive:"screen"},{default:t(()=>[(p(!0),v(U,null,O(c.value.users,(h,u)=>(p(),z(e(F),{key:u},{default:t(()=>[s(Le,{"contest-item":h,"is-ending-contest":!a.isActiveContest,onSave:d[0]||(d[0]=r=>f())},null,8,["contest-item","is-ending-contest"])]),_:2},1024))),128))]),_:1})):(p(),v("div",Se,[s(e(oe),{description:"Участниц пока нет"},{icon:t(()=>[s(e(D),{size:36,color:"#19A058"},{default:t(()=>[s(e(ne))]),_:1})]),_:1})]))}}),Ae={class:"text-[64px]"},Ie=o("div",{class:"text-xl md:text-3xl max-w-[1024px] text-center text-gray-500"}," Присоединяйтесь к нашему фотоконкурсу и продемонстрируйте свой уникальный взгляд на мир. Мы ищем потрясающие, оригинальные изображения, которые рассказывают историю и вызывают эмоции. Независимо от того, являетесь ли вы опытным профессионалом или начинающим любителем, мы приветствуем ваши работы! ",-1),Me={class:"mt-6"},Te={class:"text-3xl text-center"},Fe=N({__name:"ContestWelcome",props:{contest:{}},setup(k){return(c,f)=>(p(),z(e($),{vertical:"",align:"center",class:"h-screen",justify:"center"},{default:t(()=>[s(e(E),{type:"success"},{default:t(()=>[o("div",Ae,b(c.contest.name),1)]),_:1}),Ie,o("div",Me,[o("span",Te,[l("c "),s(e(E),{type:"info"},{default:t(()=>[o("div",null,b(c.contest.start),1)]),_:1}),l(" по "),s(e(E),{type:"error"},{default:t(()=>[o("div",null,b(c.contest.finish),1)]),_:1})])])]),_:1}))}}),Ue={key:0,class:"h-full relative"},Pe={key:0,class:"flex items-center justify-center mt-16 w-full"},Re={class:"mt-16"},je=o("div",{class:"text-xl md:text-[48px] mb-16"},"Участницы конкурса",-1),at=N({__name:"index",setup(k){const c=Z(),f=P(),{user:a}=R(f),d=C(null),h=async()=>{try{const r=await V.prizeList(),{data:_}=r;d.value=_.contest}catch(r){console.log(r)}},u=A(()=>{if(d.value.prizes){if(c.isMobile)return d.value.prizes;const r=d.value.prizes.sort((n,g)=>n.place-g.place),_=r.findIndex(n=>n.place===2),y=r.splice(_,1)[0];r.unshift(y);const m=r.findIndex(n=>n.place===1),w=r.splice(m,1)[0],i=Math.floor(r.length/2);return r.splice(i,0,w),r}return[]});return j(()=>{h()}),(r,_)=>{const y=ue,m=xe;return d.value?(p(),v("div",Ue,[s(Fe,{contest:d.value},null,8,["contest"]),s(y,{"prize-list":u.value},null,8,["prize-list"]),e(a).role===e(Q).MODEL_ACCOUNT?(p(),v("div",Pe,[s(m)])):I("",!0),o("div",Re,[je,s(Ee,{"is-active-contest":d.value.active},null,8,["is-active-contest"])])])):I("",!0)}}});export{at as default};
