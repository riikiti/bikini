import{_ as E}from"./user-default.gYFxx9BI.js";import{H as S,_ as B,aa as I,L as v,a4 as u,ai as M,o as r,c as i,a as n,U as e,a1 as p,w as a,b as t,O as R,d as V,t as h,a2 as _,a7 as F,ab as g}from"./entry.3g9-3dMj.js";import{T as x,S as O,B as A}from"./usersRepository.r6XaIo7i.js";import{N as H}from"./Tag.hjacs3-Y.js";import{H as L}from"./heart.rXGyMT5E.js";import{M as P}from"./mail.hrgPt1qm.js";import{u as $}from"./use-message.RQsSQi_i.js";import{N as c}from"./createLucideIcon.vLeGIYKz.js";import{N as j}from"./Image.MHBzhVQa.js";const G={class:"rounded overflow-hidden relative bg-white dark:bg-muted border shadow-accent"},W={class:"absolute top-2 left-2 z-20"},D={class:"h-[250px] relative overflow-hidden rounded-md"},U={key:1,src:E,class:"w-full h-full object-cover"},q={class:"space-y-1 mt-3"},J={class:"text-xl font-medium leading-none"},K={class:"grid grid-cols-5 mt-2 self-center pb-2 pt-2"},Q={key:0,class:"text-gray-300 hover:text-red-600"},X={key:1,class:"text-gray-300 hover:text-red-600"},Y={key:2,class:"text-gray-300 hover:text-red-600"},Z={key:3,class:"text-gray-300 hover:text-red-600"},de=S({__name:"users-card",props:{card:{}},emits:["update"],setup(y,{emit:k}){const m=$(),N=B(),w=k,b=y,{card:s}=I(b),T=v(()=>{const{info:{messages_status:o}}=s.value;if(o){for(const l in o)if(o[l]!==!1&&o[l]!==null)return!0}return!1}),z=async()=>{try{if(s.value.is_favorite){const o=await g.removeFromFavourite(s.value.id);m.warning(o)}else{const o=await g.addToFavourite(s.value.id);m.success(o)}await N.setSettings(),await w("update")}catch{m.error("Ooops!Что-то пошло не так!")}},C=v(()=>u.MESSENGER+`/${s.value.id}`);return(o,l)=>{var f;const d=M("router-link");return r(),i("div",G,[n("div",W,[(f=e(s))!=null&&f.rating?(r(),p(e(H),{key:0,round:"",strong:"",bordered:!1},{icon:a(()=>[t(e(c),{component:R(e(x))},null,8,["component"])]),default:a(()=>[V(" "+h(e(s).rating),1)]),_:1})):_("",!0)]),n("div",D,[e(s).avatar?(r(),p(e(j),{key:0,src:e(s).avatar,"fallback-src":"~/assets/images/profile/user-default.png",width:"100%",height:"100%","object-fit":"cover",class:"w-full h-full"},null,8,["src"])):(r(),i("img",U))]),n("div",q,[t(d,{to:e(u).PROFILE+`${e(s).id}`,class:"text-black no-underline"},{default:a(()=>[n("h3",J,h(e(s).name),1)]),_:1},8,["to"])]),n("div",K,[e(s).active_contest?(r(),i("div",Q,[t(d,{to:e(u).ACTIVE_CONTEST,class:"text-gray-300 hover:text-red-600"},{default:a(()=>[t(e(c),{size:32},{default:a(()=>[t(e(L),{size:32})]),_:1})]),_:1},8,["to"])])):_("",!0),T.value?(r(),i("div",X,[t(d,{to:C.value,class:"text-gray-300 hover:text-red-600"},{default:a(()=>[t(e(c),{size:32},{default:a(()=>[t(e(P),{size:32})]),_:1})]),_:1},8,["to"])])):_("",!0),e(s).active_contest?(r(),i("div",Y,[t(d,{to:e(u).ACTIVE_CONTEST,class:"text-gray-300 hover:text-red-600"},{default:a(()=>[t(e(c),{size:32},{default:a(()=>[t(e(O),{fill:"currentColor"})]),_:1})]),_:1},8,["to"])])):_("",!0),n("div",{class:F(["text-gray-300 hover:text-red-600",{"text-red-600":e(s).is_favorite}]),onClick:l[0]||(l[0]=ee=>z())},[t(e(c),{size:32},{default:a(()=>[t(e(A),{size:32})]),_:1})],2),e(s).is_winner?(r(),i("div",Z,[t(d,{to:e(u).WINNER_PAGE,class:"text-red-600"},{default:a(()=>[t(e(c),{size:32},{default:a(()=>[t(e(x),{size:32})]),_:1})]),_:1},8,["to"])])):_("",!0)])])}}});export{de as _};
