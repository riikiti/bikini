import{_ as q}from"./ContestPrizeSection.vue.b8yHPFuV.js";import{_ as V}from"./nuxt-link.J_JEgvNs.js";import{_ as D,N as T,a as B}from"./FileUpload.OrJsyeHP.js";import{H as z,r as C,L as A,o as m,R as N,w as t,b as s,S as e,T as y,d as a,a as n,a9 as H,Y as F,$ as U,c as $,t as b,a2 as I,F as O,aa as j,_ as W,ab as Y,a0 as M,O as Z,ac as J,a3 as P,V as K,Z as Q}from"./entry.ydcKSOmp.js";import{N as w}from"./Space.nPwSXytI.js";import{c as R}from"./contestRepository.ePNIXp2a.js";import{N as L}from"./GradientText.RrVuti_1.js";import{E as X}from"./EUserAccoutType.8nCACn_d.js";import{N as S}from"./Tooltip.oP0Hs3S7.js";import{T as ee}from"./thumbs-up.dCKs9_eW.js";import{N as te}from"./Alert.x3MunG6N.js";import{c as se,N as G}from"./createLucideIcon.6Cz25YP-.js";import{N as oe}from"./Empty.Vf6a6RTA.js";import"./get-slot.bpfTnPl7.js";import"./Popover.2SHOBVdi.js";import"./use-locale.B4WoGKG3.js";import"./format-length.4l65r8M5.js";import"./use-merged-state._FoYgtTV.js";import"./_plugin-vue_export-helper.x3n3nnut.js";import"./use-houdini.U4416iWO.js";/**
 * @license lucide-vue-next v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=se("CameraIcon",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),ae=n("div",null,"Конкурс",-1),le=z({__name:"ContestUserModal",props:{isEdit:{type:Boolean}},emits:["formsave","formclose"],setup(k,{emit:c}){const v=k,_=c,u=()=>{_("formsave",l.value)},h=()=>{_("formclose")},l=C(null),r=p=>{l.value=p},d=C({add:{route:"/api/auth/active-contest/add-photo",method:"POST"},update:{route:"/api/auth/active-contest/update-photo",method:"POST"}}),g=A(()=>d.value[v.isEdit?"update":"add"]);return(p,f)=>{const i=D;return m(),N(e(H),{preset:"dialog"},{header:t(()=>[ae]),action:t(()=>[s(e(w),{size:"large"},{default:t(()=>[s(e(y),{type:"error",onClick:f[0]||(f[0]=o=>h())},{default:t(()=>[a("Отмена")]),_:1}),s(e(y),{type:"primary",onClick:f[1]||(f[1]=o=>u())},{default:t(()=>[a("Сохранить")]),_:1})]),_:1})]),default:t(()=>[n("div",null,[s(i,{route:g.value.route,method:g.value.method,onUploaded:r},null,8,["route","method"])])]),_:1})}}}),re={class:"w-full"},ie={key:1,class:"bg-gray-100/50 w-full py-8"},ce={class:"text-xl sm:text-2xl"},ue=["src"],de=z({__name:"ContestUser",setup(k){const c=C(!1),v=F(),_=()=>{c.value=!0,g()},u=C(null),h=async()=>{const{data:f}=await R.currentUserList();u.value=f.contest_model},l=A(()=>u.value),r=async()=>{await h(),await v.profile(),p()},d=C(!1),g=()=>{d.value=!d.value},p=()=>{d.value=!1,c.value=!1};return U(async()=>{await h()}),(f,i)=>{const o=V;return m(),$(O,null,[n("div",re,[l.value?(m(),$("div",ie,[s(e(w),{vertical:"",size:"large",align:"center"},{default:t(()=>[n("div",ce,[a(" Я участница конкурса,мой рейтинг "),s(e(L),{gradient:"linear-gradient(to right, #8a2387, #e94057, #f27121)"},{default:t(()=>[a(b(l.value.rating),1)]),_:1})]),n("div",null,[n("img",{src:l.value.photo,alt:"",class:"w-[150px] h-[150px]"},null,8,ue)]),s(e(w),{class:"mt-6"},{default:t(()=>[s(o,{to:e(I).PROFILE+`${l.value.user.id}`},{default:t(()=>[s(e(y),{class:"uppercase",type:"primary",size:"large",dashed:""},{default:t(()=>[a("Мой Профиль")]),_:1})]),_:1},8,["to"]),s(e(y),{class:"uppercase",type:"primary",size:"large",dashed:"",onClick:_},{default:t(()=>[a("Обновить фото")]),_:1}),s(o,{to:e(I).STATISTICS},{default:t(()=>[s(e(y),{class:"uppercase",type:"primary",size:"large",dashed:""},{default:t(()=>[a("Статистика")]),_:1})]),_:1},8,["to"])]),_:1})]),_:1})])):(m(),N(e(w),{key:0,justify:"center"},{default:t(()=>[s(e(y),{type:"info",size:"large",class:"md:text-3xl md:py-8",onClick:i[0]||(i[0]=x=>g())},{default:t(()=>[a("Стать участником конкурса")]),_:1})]),_:1}))]),s(e(le),{show:d.value,"onUpdate:show":i[1]||(i[1]=x=>d.value=x),"is-edit":c.value,onFormsave:r,onFormclose:i[2]||(i[2]=x=>p()),onClose:i[3]||(i[3]=x=>p())},null,8,["show","is-edit"])],64)}}}),pe={class:"mb-2 flex justify-between items-center"},me={key:0},_e=["src"],fe=n("div",{class:"text-center"},[n("span",null,[n("b",{class:"font-extrabold"},"+1"),a(" балл к рейтингу участницы")])],-1),ve=n("div",{class:"text-center"},[a("Участница увидит что именно "),n("b",null,"ВЫ"),a(" добавили баллы")],-1),ge=n("div",{class:"text-center"},[a("Участница увидит что именно "),n("b",null,"ВЫ"),a(" добавили баллы")],-1),ye=n("div",{class:"text-center"},[a("Участница увидит что именно "),n("b",null,"ВЫ"),a(" добавили баллы")],-1),he=n("div",{class:"text-center"},[a("Участница увидит что именно "),n("b",null,"ВЫ"),a(" добавили баллы")],-1),xe={key:1,class:"font-medium text-lg w-full break-words text-center my-4"},we=z({__name:"ContestCard",props:{contestItem:{},contestName:{default:""},isEndingContest:{type:Boolean,default:!1}},emits:["save"],setup(k,{emit:c}){const v=k,_=F(),{user:u}=j(_),h=W(),{contestItem:l}=Y(v),r=c,d=A(()=>l.value.is_free_payment),g=async i=>{try{if(!d.value){const o={type:i,model_id:l.value.user.id};await P.freeVoting(o),r("save")}}catch(o){console.log(o)}},p=async i=>{const o={type:i,model_id:l.value.user.id},x=await P.premiumVoting(o);window.open(x.link,"_blank"),r("save")},f=A(()=>l.value.user.id!==u.value.id);return(i,o)=>{const x=V;return m(),$("div",{class:J(["flex flex-col p-4 rounded-lg overflow-hidden shadow",{"shadow-blue-300 shadow-lg":!f.value}])},[n("div",pe,[i.contestName?(m(),$("div",me,"Конкурс: "+b(i.contestName),1)):M("",!0),s(e(te),{title:"Рейтинг:"+e(l).rating,type:"success"},null,8,["title"])]),n("div",{class:"h-[250px] overflow-hidden rounded w-full max-h-full hover:cursor-pointer",onClick:o[0]||(o[0]=E=>e(h).push(e(I).PROFILE+`${e(l).user.id}`))},[n("img",{src:e(l).photo,class:"w-full h-full max-w-full max-h-full aspect-square object-cover"},null,8,_e)]),!i.isEndingContest&&f.value?(m(),N(e(B),{key:0,"x-gap":12,"y-gap":12,cols:3,class:"w-full mt-4"},{default:t(()=>[s(e(T),null,{default:t(()=>[s(e(w),{vertical:""},{default:t(()=>[s(e(S),{trigger:"hover",placement:"bottom"},{trigger:t(()=>[s(e(y),{strong:"",secondary:"",size:"large",circle:"",type:"warning",disabled:d.value,onClick:o[1]||(o[1]=E=>g(1))},{default:t(()=>[s(e(G),{size:24,component:Z(e(ee))},null,8,["component"])]),_:1},8,["disabled"])]),default:t(()=>[fe]),_:1})]),_:1})]),_:1}),s(e(T),{span:2},{default:t(()=>[s(e(w),{vertical:"",align:"end"},{default:t(()=>[s(e(w),null,{default:t(()=>[s(e(S),{trigger:"hover",placement:"bottom"},{trigger:t(()=>[s(e(y),{strong:"",secondary:"",size:"large",circle:"",type:"warning",onClick:o[2]||(o[2]=E=>p(5))},{default:t(()=>[a(" +5 ")]),_:1})]),default:t(()=>[ve]),_:1}),s(e(S),{trigger:"hover",placement:"bottom"},{trigger:t(()=>[s(e(y),{strong:"",secondary:"",size:"large",circle:"",type:"warning",onClick:o[3]||(o[3]=E=>p(15))},{default:t(()=>[a(" +15 ")]),_:1})]),default:t(()=>[ge]),_:1}),s(e(S),{trigger:"hover",placement:"bottom"},{trigger:t(()=>[s(e(y),{strong:"",secondary:"",size:"large",circle:"",type:"warning",onClick:o[4]||(o[4]=E=>p(25))},{default:t(()=>[a(" +25 ")]),_:1})]),default:t(()=>[ye]),_:1}),s(e(S),{trigger:"hover",placement:"bottom"},{trigger:t(()=>[s(e(y),{strong:"",secondary:"",size:"large",circle:"",type:"warning",onClick:o[5]||(o[5]=E=>p(50))},{default:t(()=>[a(" +50 ")]),_:1})]),default:t(()=>[he]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):(m(),$("div",xe,[s(e(L),null,{default:t(()=>[a("Это ВЫ! ")]),_:1})])),s(e(w),{class:"mt-4"},{default:t(()=>[s(x,{to:e(I).PROFILE+`${e(l).user.id}`,class:"no-underline text-lg font-bold text-black"},{default:t(()=>[a(b(e(l).user.name),1)]),_:1},8,["to"])]),_:1})],2)}}}),$e={key:1},ke=z({__name:"ContestActiveUsers",props:{isActiveContest:{type:Boolean,default:!0}},setup(k){const c=C(null),v=async()=>{try{const _=await R.allModelList();c.value=_.data.contest}catch(_){console.log(_)}};return U(async()=>{await v()}),(_,u)=>c.value&&c.value.users.length>0?(m(),N(e(B),{key:0,cols:"1 xs:2 m:3 l:4","x-gap":10,"y-gap":10,responsive:"screen"},{default:t(()=>[(m(!0),$(O,null,K(c.value.users,(h,l)=>(m(),N(e(T),{key:l},{default:t(()=>[s(we,{"contest-item":h,"is-ending-contest":!_.isActiveContest,onSave:u[0]||(u[0]=r=>v())},null,8,["contest-item","is-ending-contest"])]),_:2},1024))),128))]),_:1})):(m(),$("div",$e,[s(e(oe),{description:"Участниц пока нет"},{icon:t(()=>[s(e(G),{size:36,color:"#19A058"},{default:t(()=>[s(e(ne))]),_:1})]),_:1})]))}}),Ce={class:"text-[64px]"},be=n("div",{class:"text-xl md:text-3xl max-w-[1024px] text-center text-gray-500"}," Присоединяйтесь к нашему фотоконкурсу и продемонстрируйте свой уникальный взгляд на мир. Мы ищем потрясающие, оригинальные изображения, которые рассказывают историю и вызывают эмоции. Независимо от того, являетесь ли вы опытным профессионалом или начинающим любителем, мы приветствуем ваши работы! ",-1),Ne={class:"mt-6"},ze={class:"text-3xl text-center"},Ee=z({__name:"ContestWelcome",props:{contest:{}},setup(k){return(c,v)=>(m(),N(e(w),{vertical:"",align:"center",class:"h-screen",justify:"center"},{default:t(()=>[s(e(L),{type:"success"},{default:t(()=>[n("div",Ce,b(c.contest.name),1)]),_:1}),be,n("div",Ne,[n("span",ze,[a("c "),s(e(L),{type:"info"},{default:t(()=>[n("div",null,b(c.contest.start),1)]),_:1}),a(" по "),s(e(L),{type:"error"},{default:t(()=>[n("div",null,b(c.contest.finish),1)]),_:1})])])]),_:1}))}}),Se={key:0,class:"h-full relative"},Le={key:0,class:"flex items-center justify-center mt-16 w-full"},Ae={class:"mt-16"},Ie=n("div",{class:"text-xl md:text-[48px] mb-16"},"Участницы конкурса",-1),Xe=z({__name:"index",setup(k){const c=Q(),v=F(),{user:_}=j(v),u=C(null),h=async()=>{try{const r=await R.prizeList(),{data:d}=r;u.value=d.contest}catch(r){console.log(r)}},l=A(()=>{if(u.value.prizes){if(c.isMobile)return u.value.prizes;const r=u.value.prizes.sort((o,x)=>o.place-x.place),d=r.findIndex(o=>o.place===2),g=r.splice(d,1)[0];r.unshift(g);const p=r.findIndex(o=>o.place===1),f=r.splice(p,1)[0],i=Math.floor(r.length/2);return r.splice(i,0,f),r}return[]});return U(()=>{h()}),(r,d)=>{const g=q,p=de;return u.value?(m(),$("div",Se,[s(Ee,{contest:u.value},null,8,["contest"]),s(g,{"prize-list":l.value},null,8,["prize-list"]),e(_).role===e(X).MODEL_ACCOUNT?(m(),$("div",Le,[s(p)])):M("",!0),n("div",Ae,[Ie,s(ke,{"is-active-contest":u.value.active},null,8,["is-active-contest"])])])):M("",!0)}}});export{Xe as default};
